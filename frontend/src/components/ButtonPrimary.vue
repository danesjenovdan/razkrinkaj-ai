<script setup lang="ts">
import { computed } from 'vue'

const props = withDefaults(
  defineProps<{
    buttonText?: string
    link?: object
    emoji?: string
    icon?: string
    color?: string
  }>(),
  {
    color: 'primary',
  },
)

if (props.emoji && props.icon) {
  throw new Error('You can only use either emoji or icon, not both')
}

const text = computed(() => props.buttonText || 'Nadaljuj')

const componentName = computed(() => (props.link ? 'RouterLink' : 'button'))
</script>

<template>
  <component
    :is="componentName"
    :to="link"
    :class="['button-primary', `button-color-${color}`]"
  >
    <span>{{ text }}</span>
    <span v-if="emoji" class="emoji">{{ emoji }}</span>
    <span v-if="icon" class="icon">
      <svg
        v-if="icon === 'arrow'"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 38.614 31.987"
      >
        <path
          d="M3.307 14.02v1.333zm-1.413.592-.95-.933Zm-.56 1.419-1.333.026v.027zm2.05 1.936v-1.334h-.018zm24.494 0v-1.334zm.779.325.944-.944zm.325.779h1.333zm-.325.78.944.945zm-7.448 7.452.944.944zm-.58 1.413-1.332.013 1.333-.01zm.606 1.405-.922.96.024.024zm1.432.53.038 1.334zm1.392-.612-.944-.944-.013.013zm12.648-12.643.942.941zm0-2.8.942-.939zM24.054 1.95l-.957.928.013.013zm-1.395-.614L22.7.004zm-1.426.534L20.33.884l-.021.024.923.96zm-.606 1.4 1.334.013zm.579 1.413.944-.941zm7.45 7.453.945-.941zm.326.782h1.333zm-.325.78.944.942zm-.78.324v1.333zM3.306 12.689a3.307 3.307 0 0 0-2.36.992l1.901 1.867a.64.64 0 0 1 .456-.192zm-2.363.992a3.307 3.307 0 0 0-.941 2.376l2.666-.053a.64.64 0 0 1 .182-.459ZM.001 16.09a3.353 3.353 0 0 0 1.048 2.299l1.832-1.939a.69.69 0 0 1-.216-.472Zm1.048 2.299a3.36 3.36 0 0 0 2.354.915l-.04-2.667a.688.688 0 0 1-.482-.187Zm2.336.915h24.493v-2.667H3.388Zm24.49 0a.227.227 0 0 1-.16-.067l1.886-1.885a2.44 2.44 0 0 0-1.723-.715zm-.16-.067a.227.227 0 0 1-.066-.16h2.666a2.44 2.44 0 0 0-.714-1.725zm-.066-.16a.22.22 0 0 1 .066-.163l1.886 1.886a2.437 2.437 0 0 0 .714-1.726zm.066-.163-7.448 7.446 1.886 1.888 7.448-7.451zm-7.448 7.446a3.307 3.307 0 0 0-.97 2.373l2.666-.027a.64.64 0 0 1 .187-.458Zm-.97 2.373c.01.888.373 1.733 1.016 2.35l1.848-1.92a.64.64 0 0 1-.198-.457zm1.04 2.373a3.365 3.365 0 0 0 2.365.88l-.08-2.666a.693.693 0 0 1-.485-.182zm2.365.88a3.364 3.364 0 0 0 2.312-1.018l-1.915-1.86a.693.693 0 0 1-.474.212zM25 30.98l12.645-12.64-1.885-1.888-12.646 12.643Zm12.645-12.643a3.31 3.31 0 0 0 .968-2.341h-2.667a.648.648 0 0 1-.186.459zm.968-2.341c0-.877-.347-1.717-.968-2.339L35.76 15.54a.648.648 0 0 1 .186.456zm-.968-2.341L25 1.004l-1.888 1.885L35.76 15.54ZM25.014 1.02A3.36 3.36 0 0 0 22.702.001l-.077 2.667a.69.69 0 0 1 .474.208zM22.702.001a3.36 3.36 0 0 0-2.365.883l1.8 1.965a.693.693 0 0 1 .488-.181zm-2.39.904a3.307 3.307 0 0 0-1.013 2.35l2.667.026a.64.64 0 0 1 .195-.453zM19.3 3.255a3.307 3.307 0 0 0 .968 2.373L22.15 3.74a.64.64 0 0 1-.187-.459l-2.666-.026zm.968 2.373 7.45 7.445 1.886-1.885-7.45-7.45zm7.45 7.445a.227.227 0 0 1-.066-.16h2.667a2.44 2.44 0 0 0-.715-1.722zm-.066-.16a.22.22 0 0 1 .064-.16l1.888 1.883a2.44 2.44 0 0 0 .715-1.723zm.067-.162a.227.227 0 0 1 .16-.067l.003 2.667a2.44 2.44 0 0 0 1.722-.715zm.16-.067H3.308v2.667h24.575Z"
        />
        <path
          d="M3.307 14.02a1.973 1.973 0 0 0-1.973 2.013 2.024 2.024 0 0 0 2.053 1.936h24.494a1.107 1.107 0 0 1 .778 1.886l-7.45 7.448a1.973 1.973 0 0 0 .026 2.818 2.027 2.027 0 0 0 2.822-.082l12.648-12.643a1.981 1.981 0 0 0 0-2.8L24.054 1.95a2.024 2.024 0 0 0-2.821-.08 1.973 1.973 0 0 0-.027 2.816l7.45 7.45a1.107 1.107 0 0 1-.778 1.886z"
          fill="#ebf374"
        />
      </svg>
      <svg
        v-else-if="icon === 'refresh'"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 100 100"
      >
        <path
          d="M96.703 18.359a2.885 2.885 0 0 0-3.25 1.164l-2.176 3.266C82.238 9.137 66.727.484 50 .484 29.648.484 11.082 13.28 3.801 32.32c-1.511 3.945.469 8.363 4.414 9.875a7.654 7.654 0 0 0 9.875-4.414C23.122 24.62 35.945 15.777 50 15.777c11.484 0 22.141 5.906 28.402 15.246l-3.488.539a2.896 2.896 0 0 0-2.422 2.472 2.89 2.89 0 0 0 1.676 3.024l20.39 9.176c.02.007.04.011.056.015a2.79 2.79 0 0 0 1.183.266 2.797 2.797 0 0 0 2.7-2.074 2.88 2.88 0 0 0 .148-.832l.105-22.47a2.88 2.88 0 0 0-2.047-2.78zm-4.914 39.446a7.639 7.639 0 0 0-9.871 4.418c-5.031 13.16-17.86 22.004-31.914 22.004-11.488 0-22.145-5.906-28.406-15.25l3.488-.54a2.892 2.892 0 0 0 .746-5.495l-20.39-9.176a.325.325 0 0 0-.06-.016 2.76 2.76 0 0 0-1.175-.265 2.81 2.81 0 0 0-2.703 2.074c-.082.266-.14.547-.14.828L1.25 78.86a2.869 2.869 0 0 0 2.047 2.777 2.882 2.882 0 0 0 3.254-1.164L8.727 77.2c9.039 13.656 24.547 22.316 41.277 22.316 20.352 0 38.914-12.797 46.199-31.84a7.651 7.651 0 0 0-4.415-9.871z"
        />
      </svg>
      <span v-else>{{ icon }}</span>
    </span>
  </component>
</template>

<style scoped lang="scss">
.button-primary {
  display: flex;
  gap: 0.68rem;
  align-items: center;
  justify-content: space-between;
  padding: 1.125rem 1.25rem;
  border-radius: 3px;
  border: 0.5px solid #000;
  background: #fff;
  font-family: var(--font-family-heading);
  font-size: 1.3125rem;
  line-height: 1;
  font-weight: 700;
  color: var(--color-text);
  text-decoration: none;
  cursor: pointer;

  @media (min-width: 768px) {
    font-size: 1.5rem;
    padding-inline: 2.12rem 1.31rem;
    padding-block: 1.2rem;
  }

  &.button-color-primary {
    background: #4063f6;
    color: #fff;
  }

  .emoji,
  .icon {
    flex-shrink: 0;
  }

  .icon {
    display: flex;
    width: 1em;
    height: auto;

    svg {
      width: 100%;
      height: 100%;
    }
  }

  @at-root body:not(.is-ios) &:hover {
    background: #fefffb;
    box-shadow:
      0px 0px 6px 0px #cbd844 inset,
      0px 0px 7px -1px #f3ff6f;

    &.button-color-primary {
      background: #3458f3;
      box-shadow:
        0px 0px 6px 0px #173ac9 inset,
        0px 0px 7px -1px #4063f6;
    }
  }
}
</style>
